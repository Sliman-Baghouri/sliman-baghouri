if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }

__d("SearchResultPageNavigationPerfTypedLogger",["Banzai","GeneratedLoggerUtils"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:SearchResultPageNavigationPerfLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:SearchResultPageNavigationPerfLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:SearchResultPageNavigationPerfLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAppID=function(a){this.$1.appid=a;return this};c.setBemDisplayTime=function(a){this.$1.bem_display_time=a;return this};c.setBrowseLayoutPageletDisplayTime=function(a){this.$1.browse_layout_pagelet_display_time=a;return this};c.setCaller=function(a){this.$1.caller=a;return this};c.setFilterType=function(a){this.$1.filter_type=a;return this};c.setIemDisplayTime=function(a){this.$1.iem_display_time=a;return this};c.setNavType=function(a){this.$1.nav_type=a;return this};c.setNavigationStartTime=function(a){this.$1.navigation_start_time=a;return this};c.setReferrer=function(a){this.$1.referrer=a;return this};c.setSessionID=function(a){this.$1.session_id=a;return this};c.setVCTime=function(a){this.$1.vc_time=a;return this};return a}();c={appid:!0,bem_display_time:!0,browse_layout_pagelet_display_time:!0,caller:!0,filter_type:!0,iem_display_time:!0,nav_type:!0,navigation_start_time:!0,referrer:!0,session_id:!0,vc_time:!0};f["default"]=a}),66);
__d("SearchResultPageLoggingInlineActionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744351");c=b("FalcoLoggerInternal").create("search_result_page_logging_inline_action",a);e.exports=c}),null);
__d("SearchResultPageLoggingItemClickedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744352");c=b("FalcoLoggerInternal").create("search_result_page_logging_item_clicked",a);e.exports=c}),null);
__d("SearchCometResultsLoggerUtil",["SearchResultPageLoggingInlineActionFalcoEvent","SearchResultPageLoggingItemClickedFalcoEvent","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b){c("SearchResultPageLoggingItemClickedFalcoEvent").logImmediately(function(){var c={click_type:"graph_search_results_module_tapped",common:{logging_unit_id:a,session_id:b,timestamp:Date.now().toString()}};return c})};b=function(a,b,d){c("SearchResultPageLoggingInlineActionFalcoEvent").logImmediately(function(){var c={common:{logging_unit_id:a,session_id:b,timestamp:Date.now().toString()},inline_action_name:d};return c})};d=function(a,b,d){c("SearchResultPageLoggingItemClickedFalcoEvent").logImmediately(function(){var c={click_type:"graph_search_results_item_in_module_tapped",common:{logging_unit_id:a,session_id:b,timestamp:Date.now().toString()},unit_id_result_id:d};return c})};e=function(a,b,d){c("SearchResultPageLoggingInlineActionFalcoEvent").logImmediately(function(){var c={common:{logging_unit_id:a,session_id:b,timestamp:Date.now().toString()},inline_action_name:d};return c})};f=function(a,b){c("SearchResultPageLoggingItemClickedFalcoEvent").logImmediately(function(){var c={click_type:"graph_search_results_see_more_on_module_tapped",common:{logging_unit_id:a,session_id:b,timestamp:Date.now().toString()}};return c})};g.logModuleClick=a;g.logModuleInlineAction=b;g.logResultClick=d;g.logResultInlineAction=e;g.logSeeMoreClick=f}),98);
__d("BrowseClientEventLogger",["csx","DOMQuery","SearchCometResultsLoggerUtil","ge","ifRequired"],(function(a,b,c,d,e,f,g,h){"use strict";var i="21.",j;function k(a,b,c,e){e===void 0&&(e={});if(!a||!b)return;e.event=a;e.client_time=Math.floor(Date.now());e.client_time_2=Date.now()/1e3;e.session_id=b;e.vertical=c;j=j||[];if(j.indexOf(b)!==-1)return;if(e.event==="click")switch(e.click_type){case"see_more":d("SearchCometResultsLoggerUtil").logSeeMoreClick(e.unit_id,e.session_id);break;case"result":d("SearchCometResultsLoggerUtil").logResultClick(e.unit_id,e.session_id,e.unit_id_result_id);break}return}function a(a){a.gt.event="click",l(a,!0),c("ifRequired")("FacebarTypeaheadRefreshNullstate",function(a){a.setIsNullstateStale(!0)})}function b(a){a.event="client_view",l(a)}function l(a,b){b===void 0&&(b=!1);var c=null;b&&(c=a,a=a.gt);if(!a||!a.xt||a.xt.indexOf(i)!==0)return;var d=JSON.parse(a.xt.substring(3));b&&(d.click_type=a.click_type,d.tn=a.tn,d.clicked_href=a.clicked_href,c&&c.bt&&c.bt.ct&&(c.bt.ct==="feedback"&&(d.feedback_score=c.bt.feedback_score,d.feedback_type=c.bt.feedback_type)));b=a.event;c=m(d.unit_id);d.position=c;if(d.display_style==="context_hscroll"&&(b==="client_view"||b==="vpvd"||b==="visible"||b==="hidden"))return;if(b==="vpvd"){if(!a.ft)return;d.vpvd_time=a.ft.vpvd_time_delta}k(b,d.session_id,d.vertical,d)}function m(a){if(a==null||a===void 0)return null;var b=0,e=c("ge")("browse_result_area");if(e==null||e===void 0)return null;e=d("DOMQuery").scry(e,"._401d");for(var f=0;f<e.length;f++){var g=e[f];g=g.getAttribute("data-gt");if(g!==null||g!==void 0){g=JSON.parse(JSON.parse(g).xt.substring(3));if(g.item_type==="result"&&g.id!==""&&g.id!==null){if(g.unit_id===a)return b;b++}}}return null}function e(a){a.event="impression",l(a)}g.logData=k;g.logClick=a;g.maybeLogClientViewEvent=b;g.maybeLogVisiblityEvent=l;g.logImpression=e}),98);
__d("BrowseClickLogger",["BrowseClientEventLogger","Event","ODS","Parent","collectDataAttributes"],(function(a,b,c,d,e,f){"use strict";function g(a,c){c=a.target;var d=(a=b("Parent")).byAttribute(c,"role"),e=a.byTag(c,"a")!=null,f=a.byTag(c,"button")!=null;a=a.byAttribute(c,"data-dense-post-click-area")!=null;e=e||f||a||d!=null&&d.getAttribute("role")==="button";if(!e)return;f=b("collectDataAttributes")(c,["bt","ft","gt"],["data-bt-key"]);f.bt&&f.bt.path&&(f.bt.path+=document.location.search);f.gt.tn=f.ft.tn;f.gt.click_type=f.bt.ct||"result";a=b("Parent").byAttribute(c,"href");d=a!=null?a.href:null;f.gt.clicked_href=d;b("BrowseClientEventLogger").logClick(f);if(f.bt==null||f.ft==null)return}var h=!1;a={init:function(a){h?b("ODS").bumpEntityKey(2966,"search.www.browse_click_logger","duplicate_initialization"):h=!0,b("Event").listen(a,"mousedown",function(a){var b=a.button===2||a.which===3?"right_click":"left_click";a.shiftKey&&(b+="_shift");a.altKey&&(b+="_alt");(a.metaKey||a.ctrlKey)&&(b+="_ctrl");g(a,b)})},logClick:g};e.exports=a}),null);
__d("ScriptPathState",["Arbiter"],(function(a,b,c,d,e,f){var g,h,i,j,k=100,l={setIsUIPageletRequest:function(a){i=a},setUserURISampleRate:function(a){j=a},reset:function(){g=null,h=!1,i=!1},_shouldUpdateScriptPath:function(){return h&&!i},_shouldSendURI:function(){return Math.random()<j},getParams:function(){var a={};l._shouldUpdateScriptPath()?l._shouldSendURI()&&g!==null&&(a.user_uri=g.substring(0,k)):a.no_script_path=1;return a}};b("Arbiter").subscribe("pre_page_transition",function(a,b){h=!0,g=b.to.getUnqualifiedURI().toString()});e.exports=a.ScriptPathState=l}),null);
__d("AjaxPipeRequest",["invariant","Arbiter","AsyncRequest","AsyncRequestConfig","BigPipe","CSS","ContextualComponent","DOM","Env","PageEvents","PageletGK","PageletSet","ScriptPathState","URI","containsNode","ge","goOrReplace","performance","performanceAbsoluteNow"],(function(a,b,c,d,e,f,g,h){var i,j=0;function k(a,b){var e=c("ge")(a);if(!e)return;b||(e.style.minHeight="100px");b=d("PageletSet").getPageletIDs();for(var f=0;f<b.length;f++){var g=b[f];if(d("PageletSet").hasPagelet(g)){var h=d("PageletSet").getPagelet(g);c("containsNode")(e,h.getRoot())&&d("PageletSet").removePagelet(g)}}c("Arbiter").inform(c("PageEvents").AJAXPIPE_ONBEFORECLEARCANVAS,{canvasID:a});function i(a){var b=c("ContextualComponent").forNode(a);b&&b.unmount();c("DOM").empty(a)}c("PageletGK").destroyDomAfterEventHandler?(c("Arbiter").inform("pagelet/destroy",{id:null,root:e}),i(e)):(i(e),c("Arbiter").inform("pagelet/destroy",{id:null,root:e}))}function l(a,b){a=c("ge")(a);a&&!b&&(a.style.minHeight="100px")}b=function(){function b(a,b,d){this._allowIrrelevantRequests=!1;this._canvas_id=a;this._uri=b;this._query_data=d;a=new(c("AsyncRequest"))();a.setReplaceTransportMarkers(!1);this._request=a;this._allow_cross_page_transition=!0;this._arbiter=new(c("Arbiter"))();this._requestID=j++}var e=b.prototype;e.getArbiter=function(){return this._arbiter};e.setData=function(a){this._query_data=a;return this};e.getData=function(){return this._query_data};e.setAllowCrossPageTransition=function(a){this._allow_cross_page_transition=a;return this};e.setAppend=function(a){this._append=a;return this};e._getAsyncRequestType=function(){return c("AsyncRequestConfig").useFetchStreamAjaxPipeTransport?"useFetchWithIframeFallback":"useIframeTransport"};e.send=function(){this._arbiter.inform(c("PageEvents").AJAXPIPE_SEND,{rid:this._requestID,quickling:!!this._isQuickling,ts:c("performanceAbsoluteNow")()},"persistent");var a={ajaxpipe:1,ajaxpipe_token:c("Env").ajaxpipe_token};Object.assign(a,c("ScriptPathState").getParams());c("ScriptPathState").reset();var b=this._request;if(b==null)return this;b.setOption(this._getAsyncRequestType(),!0).delayPreDisplayJS().setURI(this._uri).setData(Object.assign(a,this._query_data)).setPreBootloadHandler(this._preBootloadHandler.bind(this)).setInitialHandler(this._onInitialResponse.bind(this)).setHandler(this._onResponse.bind(this)).setMethod("GET").setReadOnly(!0).setAllowCrossPageTransition(this._allow_cross_page_transition).setAllowIrrelevantRequests(this._allowIrrelevantRequests);this._automatic?this._relevantRequest=i:i=this._request;if(this._isQuickling){a=c("performance").clearResourceTimings||c("performance").webkitClearResourceTimings;a&&a.call(c("performance"))}b.send();return this};e._preBootloadFirstResponse=function(a){return!1};e._fireDomContentCallback=function(){var a=this._request;a&&a.cavalry&&a.cavalry.setTimeStamp("t_domcontent");this._arbiter.inform(c("PageEvents").AJAXPIPE_DOMREADY,!0,"state")};e._fireOnloadCallback=function(){window.console&&console.timeStamp&&console.timeStamp('perf_trace {"name": "e2e", "parent": "PageEvents.AJAXPIPE_ONLOAD"}');var a=this._request;a!=null&&a.cavalry&&(a.cavalry.setTimeStamp("t_hooks"),a.cavalry.setTimeStamp("t_layout"),a.cavalry.setTimeStamp("t_onload"));this._arbiter.inform(c("PageEvents").AJAXPIPE_ONLOAD,{lid:this.pipe.lid,rid:this._requestID,ts:c("performanceAbsoluteNow")()},"state")};e._isRelevant=function(a){return this._request===i||this._automatic&&this._relevantRequest===i||this._jsNonBlock||i!=null&&i.getAllowIrrelevantRequests()};e._preBootloadHandler=function(a){var b=this._request,d=a.getPayload();if(!d||d.redirect||!this._isRelevant(a))return!1;var e=!1;a.is_first&&(!this._append&&!this._displayCallback&&!d.isCometResponse&&k(this._canvas_id,this._constHeight),e=this._preBootloadFirstResponse(a),b!=null||h(0,36),this.pipe=new(c("BigPipe"))({config:d.bigPipeConfig,arbiter:this._arbiter,rootNodeID:this._canvas_id,lid:b.lid,rid:this._requestID,isAjax:!0,domContentCallback:this._fireDomContentCallback.bind(this),onloadCallback:this._fireOnloadCallback.bind(this),domContentEvt:c("PageEvents").AJAXPIPE_DOMREADY,onloadEvt:c("PageEvents").AJAXPIPE_ONLOAD,jsNonBlock:this._jsNonBlock,automatic:this._automatic,displayCallback:this._displayCallback,allowIrrelevantRequests:this._allowIrrelevantRequests}),this.pipe.setPageID(b.lid));return e};e._redirect=function(b){if(b.redirect){if(b.force||!this.isPageActive(b.redirect)){var d=["ajaxpipe","ajaxpipe_token"].concat(this.getSanitizedParameters());c("goOrReplace")(window.location,new(c("URI"))(b.redirect).removeQueryData(d),!0)}else{d=a.PageTransitions;d.go(b.redirect,!0)}return!0}else return!1};e.isPageActive=function(a){return!0};e.getSanitizedParameters=function(){return[]};e._versionCheck=function(a){return!0};e._onInitialResponse=function(a){var b=a.getPayload();if(!this._isRelevant(a))return!1;if(!b)return!0;return this._redirect(b)||!this._versionCheck(b)?!1:!0};e._processFirstResponse=function(a){this._arbiter.inform(c("PageEvents").AJAXPIPE_FIRST_RESPONSE,{lid:this.pipe.lid,quickling:!!this._isQuickling});a=a.getPayload();var b=c("ge")(this._canvas_id);a=a.canvas_class;b!=null&&a!=null&&d("CSS").setClass(b,a)};e.setFirstResponseCallback=function(a){this._firstResponseCallback=a;return this};e.setFirstResponseHandler=function(a){this._processFirstResponse=a;return this};e._onResponse=function(a){var b=a.payload;if(!this._isRelevant(a))return c("AsyncRequest").suppressOnloadToken;a.is_first&&(this._processFirstResponse(a),this._firstResponseCallback&&this._firstResponseCallback(),b.provides=b.provides||[],b.provides.push("uipage_onload"));if(b){if("content"in b.content){this._append&&(b.append=this._canvas_id);var d=b.content.content;delete b.content.content;b.content[this._canvas_id]=d}this.pipe.onPageletArrive(b)}a.is_last&&l(this._canvas_id,this._constHeight);return c("AsyncRequest").suppressOnloadToken};e.setNectarModuleDataSafe=function(a){this._request!=null&&this._request.setNectarModuleDataSafe(a);return this};e.setFinallyHandler=function(a){this._request!=null&&this._request.setFinallyHandler(a);return this};e.setErrorHandler=function(a){this._request!=null&&this._request.setErrorHandler(a);return this};e.setTransportErrorHandler=function(a){this._request!=null&&this._request.setTransportErrorHandler(a);return this};e.setResetHandler=function(a){this._resetHandler=a;return this};e.abort=function(){this._request!=null&&this._request.abort();this._reset();return this};e.abandon=function(){this._request!=null&&this._request.abandon();this._reset();return this};e._reset=function(){i==this._request&&(i=null),this._request=null,this._resetHandler&&this._resetHandler()};e.setJSNonBlock=function(a){this._jsNonBlock=a;return this};e.setAutomatic=function(a){this._automatic=a;return this};e.setDisplayCallback=function(a){this._displayCallback=a;return this};e.setConstHeight=function(a){this._constHeight=a;return this};e.setAllowIrrelevantRequests=function(a){this._allowIrrelevantRequests=a;return this};e.getAsyncRequest=function(){return this._request};b.getCurrentRequest=function(){return i};b.setCurrentRequest=function(a){i=a};return b}();b.clearCanvas=k;g["default"]=b}),98);
__d("FacebarTypeaheadRefreshNullstate",["emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h=!1,i;a=function(){function a(a){this.$1=a.getCore(),i=this.$1.data}var b=a.prototype;b.enable=function(){this.$1.subscribe("focus",function(){h&&(i.refreshNullstate(),h=!1)})};b.disable=function(){};a.setIsNullstateStale=function(a){h=a};a.forceNullstateRefresh=function(a,b){a===void 0&&(a=c("emptyFunction")),b===void 0&&(b=c("emptyFunction")),i.refreshNullstate(a,b)};return a}();g["default"]=a}),98);
__d("SearchResultPageNavigationPerfMetrics",["csx","cx","Arbiter","CSS","DOM","SearchResultPageNavigationPerfTypedLogger","SubscriptionsHandler","URI","ge","performanceAbsoluteNow","setImmediate"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=/\/search\/.+/g,k=["pagelet_loader_browse:independent:modules:pagelet","pagelet_loader_initial_browse_result"],l=null,m=null,n=null;a=function(){function a(a){this.$1=null;this.$2=null;this.$3=!1;this.$4=0;l=this;n=new(c("SearchResultPageNavigationPerfTypedLogger"))();this.$4=this.$5();a=new(c("URI"))(window.location).getPath();a.match(j)&&this.$6();this.$7(a)}var b=a.prototype;b.enable=function(){var a=this;this.$1=new(c("SubscriptionsHandler"))();this.$1.addSubscriptions(c("Arbiter").subscribe("pre_page_transition",function(b,d){a.$3=m!=null,a.$4=c("performanceAbsoluteNow")(),m=null,n=new(c("SearchResultPageNavigationPerfTypedLogger"))(),a.$7(d.to.getPath())}))};b.disable=function(){this.$8(),this.$1!=null&&(this.$1.release(),this.$1=null)};b.$6=function(){var b=function(){var b=k[d];c("Arbiter").subscribeOnce(b+"_displayed",function(c,d){a.setElementDisplayEndTime(b)},"new")};for(var d=0;d<k.length;d++)b()};b.$9=function(){var b=this;if(this.$2==null)return;this.$2.addSubscriptions(c("Arbiter").subscribe("BigPipe/init",function(b,c){b=function(){var b=k[d];c.arbiter.subscribe(b+"_displayed",function(c,d){a.setElementDisplayEndTime(b)},"new")};for(var d=0;d<k.length;d++)b()},"new"),c("Arbiter").subscribe("BrowseScrollingPageletDisplayed",function(){b.logIfVisuallyComplete()}))};b.$7=function(a){!a.match(j)?this.$8():this.$2==null&&(this.$2=new(c("SubscriptionsHandler"))(),this.$9())};b.$5=function(){var a=window.performance||window.msPerformance;return!a||!a.timing?0:a.timing.navigationStart};b.$8=function(){n=null,m=null,this.$3=!1,this.$4=0,this.$2!=null&&(this.$2.release(),this.$2=null)};b.logSessionNavigationStats=function(){if(m==null||n==null)return;m.nav_type==="quickling"&&(this.$3||(m.nav_type="initial_quickling"));var a=Math.floor(this.$4);n.setAppID(m.app_id).setReferrer(m.ref).setCaller(m.callsite).setFilterType(m.filter_type).setSessionID(m.session_id).setNavType(m.nav_type).setNavigationStartTime(a).log();m=null};b.isVisuallyComplete=function(){var a,b=c("DOM").scry(document.body,"._43zr")[0];if(b!=null&&!d("CSS").hasClass(b,"hidden_elem"))return!0;b=c("ge")("browse_result_area");if(b==null)return!0;a=Math.max((a=(a=document.documentElement)==null?void 0:a.clientHeight)!=null?a:0,window.innerHeight||0);if(a===0)return!0;var e=c("DOM").scry(b,"[data-serp-spinner]"),f=!1;for(var e=e,g=Array.isArray(e),h=0,e=g?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=e.length)break;i=e[h++]}else{h=e.next();if(h.done)break;i=h.value}i=i;i=i.getBoundingClientRect();var j=i.top,k=i.width;i=i.height;if(k!==0&&i!==0&&j<a){f=!0;break}}if(f)return!1;k=c("ge")("browse_end_of_results_footer");if(k!=null)return!0;i=b.getBoundingClientRect();j=i.top;h=i.height;g=j+h>a;return g};b.logIfVisuallyComplete=function(){if(this.isVisuallyComplete()&&n!=null){var a=Math.floor(c("performanceAbsoluteNow")());n.setVCTime(a);this.logSessionNavigationStats()}};a.setElementDisplayEndTime=function(a){if(l==null||n==null)return;var b=Math.floor(c("performanceAbsoluteNow")());switch(a){case"bootstrap_entity_module":n.setBemDisplayTime(b);break;case"pagelet_loader_browse:independent:modules:pagelet":n.setIemDisplayTime(b);break;case"pagelet_loader_initial_browse_result":n.setBrowseLayoutPageletDisplayTime(b);c("setImmediate")(function(){l&&l.logIfVisuallyComplete()});break;default:break}};a.setSessionStats=function(a){m=a};return a}();g["default"]=a}),98);
__d("QueryHistory",[],(function(a,b,c,d,e,f){"use strict";var g={};a={set:function(a,b){g[this._key(a)]=b},get:function(a){return g[this._key(a)]},_key:function(a){return"uri-"+a.getQualifiedURI().toString()}};e.exports=a}),null);
__d("SimpleSearchNavigation",["Arbiter","DOMQuery","Input","QueryHistory","URI"],(function(a,b,c,d,e,f){"use strict";var g,h=null,i=null;a={registerInput:function(a,c){var d=this;i=b("DOMQuery").scry(a,"input")[0];h&&this._updateTitle(h,c);b("Arbiter").subscribe("page_transition",function(a,c){d._updateTitle(b("QueryHistory").get(c.uri))})},_updateTitle:function(a,c){i&&(b("Input").setValue(i,a||""),i.setAttribute("singlestate",a&&c),i.blur())},setPageTitle:function(a,c){b("QueryHistory").set((g||(g=b("URI"))).getNextURI(),a);i?this._updateTitle(a,c):h=a;c={};b("Arbiter").inform("search/updateNullState",c,"state")},setPageQuery:function(a){b("Arbiter").inform("search/updateNullState",a,"state")}};e.exports=a}),null);
__d("UIPageletContentCache",[],(function(a,b,c,d,e,f){a={cache:{},getContent:function(a){return a in this.cache?this.cache[a]:null},setContent:function(a,b){this.cache[a]=b}};e.exports=a}),null);
__d("UIPagelet",["ActorURI","AjaxPipeRequest","AsyncRequest","DOM","HTML","ScriptPathState","UIPageletContentCache","URI","emptyFunction","ge","isElementNode"],(function(a,b,c,d,e,f,g){a=function(){function a(a,b,d){if(typeof a==="function")this._id=null,this._element=a;else{var e=a&&c("isElementNode")(a)?a.id:a;this._id=e||null;this._element=c("ge")(a||c("DOM").create("div"))}this._src=b||null;this._context_data=d||{};this._data={};this._handler=c("emptyFunction");this._setRequest(null);this._use_ajaxpipe=!1;this._use_post_request=!1;this._is_bundle=!0;this._allow_cross_page_transition=!1;this._append=!1;this._cache_content=!1;this._content_cache_key="";this._is_content_cached=null;this._constHeight=!1}var b=a.prototype;b.getElement=function(){return typeof this._element==="function"?this._element():this._element};b.setHandler=function(a){this._handler=a;return this};b.go=function(a,b){arguments.length>=2||typeof a==="string"?(this._src=a,this._data=b||{}):arguments.length==1&&(this._data=a);this.refresh();return this};b.setAllowCrossPageTransition=function(a){this._allow_cross_page_transition=a;return this};b.setBundleOption=function(a){this._is_bundle=a;return this};b.setErrorHandler=function(a){this._errorHandler=a;return this};b.setTransportErrorHandler=function(a){this.transportErrorHandler=a;return this};b.refresh=function(){var a=this;if(this._use_ajaxpipe)c("ScriptPathState").setIsUIPageletRequest(!0),this._setRequest(new(c("AjaxPipeRequest"))(this._id,this._src)),this._request.setAppend(this._append).setConstHeight(this._constHeight).setJSNonBlock(this._jsNonblock).setAutomatic(this._automatic).setDisplayCallback(this._displayCallback).setFinallyHandler(this._finallyHandler),this._errorHandler&&this._request.setErrorHandler(this._errorHandler),this.transportErrorHandler&&this._request.setTransportErrorHandler(this.transportErrorHandler),this._allowIrrelevantRequests!=null&&this._request.setAllowIrrelevantRequests(this._allowIrrelevantRequests);else{if(this._cache_content){var b=d("UIPageletContentCache").getContent(this._content_cache_key);if(b!==null){this.handleContent(b,!0);return this}}var e=function(b){a._setRequest(null);b=c("HTML")(b.getPayload());a.handleContent(b);var e=b.getContent().contains("<iframe");!e&&a._cache_content&&d("UIPageletContentCache").setContent(a._content_cache_key,b)},f=this._displayCallback,g=this._finallyHandler;this._setRequest(new(c("AsyncRequest"))(this._src).setMethod("GET").setReadOnly(!0).setOption("bundle",this._is_bundle).setHandler(function(a){f?f(e.bind(null,a),a):e(a),g&&g(a)}));this._errorHandler&&this._request.setErrorHandler(this._errorHandler);this.transportErrorHandler&&this._request.setTransportErrorHandler(this.transportErrorHandler);this._use_post_request&&this._request.setMethod("POST")}b=babelHelpers["extends"]({},this._context_data,this._data);this._actorID&&(b[d("ActorURI").PARAMETER_ACTOR]=this._actorID);this._request.setAllowCrossPageTransition(this._allow_cross_page_transition).setData({data:JSON.stringify(b)}).send();return this};b.handleContent=function(a,b){var d=this.getElement();d!=null&&(this._append?c("DOM").appendContent(d,a):c("DOM").setContent(d,a));b?(this._is_content_cached=!0,this._displayCallback(c("emptyFunction"))):this._is_content_cached=!1;this._handler!=null&&this._handler()};b.cancel=function(){this._request&&this._request.abort()};b.abandon=function(){this._request&&(this._request.abandon(),this._request instanceof c("AsyncRequest")&&this._request.setInitialHandler(function(){return!1}))};b.setUseAjaxPipe=function(a){this._use_ajaxpipe=!!a;return this};b.setUsePostRequest=function(a){this._use_post_request=!!a;return this};b.setAppend=function(a){this._append=!!a;return this};b.setJSNonBlock=function(a){this._jsNonblock=!!a;return this};b.setAutomatic=function(a){this._automatic=!!a;return this};b.setDisplayCallback=function(a){this._displayCallback=a;return this};b.setConstHeight=function(a){this._constHeight=!!a;return this};b.setFinallyHandler=function(a){this._finallyHandler=a;return this};b.setAllowIrrelevantRequests=function(a){this._allowIrrelevantRequests=a;return this};b.setActorID=function(a){this._actorID=a;return this};b.setCacheContent=function(a){this._cache_content=a;return this};b.setContentCacheKey=function(a){this._content_cache_key=a;return this};b.isContentCached=function(){return this._is_content_cached};b._setRequest=function(a){this._request=a,this._typedRequest=a};a.appendToInline=function(a,b){a=c("ge")(a);b=c("ge")(b);if(a&&b){while(b.firstChild)c("DOM").appendContent(a,b.firstChild);c("DOM").remove(b)}};a.loadFromEndpoint=function(b,d,e,f){f=f||{};var g="/ajax/pagelet/generic.php/"+b;f.intern&&(g="/intern"+g);f.query&&(g=g+"?"+f.query);g=new(c("URI"))(g.replace(/\/+/g,"/"));f.subdomain&&g.setSubdomain(f.subdomain);var h=!1,i="";f.contentCacheKey&&(h=!0,i=b+","+String(f.contentCacheKey));b=new a(d,g,e).setUseAjaxPipe(f.usePipe).setBundleOption(f.bundle!==!1).setAppend(f.append).setJSNonBlock(f.jsNonblock).setAutomatic(f.automatic).setDisplayCallback(f.displayCallback).setConstHeight(f.constHeight).setAllowCrossPageTransition(f.crossPage).setFinallyHandler(f.finallyHandler||c("emptyFunction")).setErrorHandler(f.errorHandler).setTransportErrorHandler(f.transportErrorHandler).setAllowIrrelevantRequests(f.allowIrrelevantRequests).setActorID(f.actorID).setCacheContent(h).setContentCacheKey(i).setUsePostRequest(f.usePostRequest);f.handler&&b.setHandler(f.handler);b.go();return b};a.loadFromEndpointBatched=function(b,d,e){var f=b.slice(0,e),g=b.slice(e);if(g.length>0){b=f[f.length-1];var h=c("emptyFunction");b.options&&b.options.finallyHandler&&(h=b.options.finallyHandler);b.options=babelHelpers["extends"]({},b.options,{finallyHandler:function(){h(),window.setTimeout(function(){a.loadFromEndpointBatched(g,d,e)},1)}})}f.forEach(function(b){a.loadFromEndpoint(b.controller,b.target_element,b.data,babelHelpers["extends"]({},b.options,d,{bundle:!0}))})};return a}();g["default"]=a}),98);